# Send a notification to a user
Function SendNotification:
    If request body is invalid:
        Return HTTP 400 Bad Request with message "Invalid request body"

    If any required field is missing:
        Return HTTP 400 Bad Request with message "Missing required fields"

    result = saveNotification(userID, type, message)
    If result is error:
        Return HTTP 500 Internal Server Error with message "Failed to save notification"

    publishEvent("notification.send", {
        user_id: userID,
        type: type,
        message: message
    })

    Return HTTP 201 Created with message "Notification sent"





# Get all notifications for current user
Function GetUserNotifications:
    If userID is missing:
        Return HTTP 401 Unauthorized with message "User not authenticated"

    notifications = fetchNotificationsByUserID(userID)
    If error while fetching:
        Return HTTP 500 Internal Server Error with message "Failed to retrieve notifications"

    Return HTTP 200 OK with data: notifications






# Mark a notification as read
Function MarkNotificationAsRead(notificationID):
    If userID is missing:
        Return HTTP 401 Unauthorized with message "User not authenticated"

    notification = fetchNotificationByID(notificationID)
    If notification not found OR notification.userID != currentUserID:
        Return HTTP 403 Forbidden with message "Not authorized to modify this notification"

    result = markAsRead(notificationID)
    If result is error:
        Return HTTP 500 Internal Server Error with message "Failed to mark as read"

    Return HTTP 200 OK with message "Notification marked as read"






# Delete a notification
Function DeleteNotification(notificationID):
    If userID is missing:
        Return HTTP 401 Unauthorized with message "User not authenticated"

    notification = fetchNotificationByID(notificationID)
    If notification not found OR notification.userID != currentUserID:
        Return HTTP 403 Forbidden with message "Not authorized to delete this notification"

    result = deleteNotification(notificationID)
    If result is error:
        Return HTTP 500 Internal Server Error with message "Failed to delete notification"

    Return HTTP 200 OK with message "Notification deleted"






# Clear all notifications for user
Function ClearNotifications:
    If userID is missing:
        Return HTTP 401 Unauthorized with message "User not authenticated"

    result = clearNotificationsByUser(userID)
    If result is error:
        Return HTTP 500 Internal Server Error with message "Failed to clear notifications"

    Return HTTP 200 OK with message "All notifications cleared"